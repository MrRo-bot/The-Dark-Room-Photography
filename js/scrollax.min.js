(function (a) {
  "function" == typeof define && define.amd
    ? define(["jquery"], a)
    : "undefined" == typeof exports
    ? a(jQuery)
    : (module.exports = a(require("jquery")));
})(function (e) {
  function W(b) {
    if (console && console.warn) console.warn("Scrollax: " + b);
    else throw "Scrollax: " + b;
  }

  function ka(b) {
    var a = !!("pageYOffset" in b);
    return {
      width: a
        ? window.innerWidth ||
          document.documentElement.clientWidth ||
          document.body.clientWidth
        : b.offsetWidth,
      height: a
        ? window.innerHeight ||
          document.documentElement.clientHeight ||
          document.body.clientHeight
        : b.offsetHeight,
      left: b[a ? "pageXOffset" : "scrollLeft"],
      top: b[a ? "pageYOffset" : "scrollTop"],
    };
  }

  function X(a) {
    return ((a = a.data("scrollax")) && eval("({" + a + "})")) || {};
  }

  function Y(b) {
    var a, d;
    return !!(
      b &&
      "object" == typeof b &&
      "object" == typeof b.window &&
      b.window == b &&
      b.setTimeout &&
      b.alert &&
      (a = b.document) &&
      "object" == typeof a &&
      (d = a.defaultView || a.parentWindow) &&
      "object" == typeof d &&
      d == b
    );
  }
  var da,
    ea,
    L,
    M,
    N,
    v = Array.prototype,
    C = v.push,
    Z = v.splice,
    aa = Object.prototype.hasOwnProperty,
    la = /[-+]?\d+(\.\d+)?/g,
    ma = [
      "translateX",
      "translateY",
      "rotate",
      "rotateX",
      "rotateY",
      "rotateZ",
      "skewX",
      "skewY",
      "scaleX",
      "scaleY",
    ],
    ba = e(window),
    ca = e(document.body),
    q = function (i, j, g) {
      function c() {
        return (
          (x = V ? ca.find(Ka) : f.find(Ka)),
          (t.length = 0),
          (ua = !!Ja.horizontal),
          x.each(fa),
          l(),
          Ja.performanceTrick && (pa = V ? ca : f),
          o("load"),
          p
        );
      }

      function k() {
        P && (P = clearTimeout(P)),
          (P = setTimeout(function () {
            p.reload();
          }));
      }

      function l() {
        var a = t.length;
        if (
          (Ja.performanceTrick &&
            pa &&
            (clearTimeout(ra),
            sa || (pa.addClass("scrollax-performance"), (sa = !0)),
            (ra = setTimeout(function () {
              pa.removeClass("scrollax-performance"), (sa = !1);
            }, 100))),
          a)
        ) {
          ta = ka(i);
          for (var b = 0; b < a; b++)
            (xa = t[b]),
              (wa = L(xa.element, i)),
              0 > wa[ua ? "right" : "bottom"] ||
                wa[ua ? "left" : "top"] > ta[ua ? "width" : "height"] ||
                ((ya = xa.options),
                (va = ya.offset || Ja.offset || 0),
                (Aa = wa[ua ? "right" : "bottom"]),
                (Ba = wa[ua ? "width" : "height"]),
                (za = (Ba - Aa + va) / Ba),
                0 > za &&
                  ((Aa = wa[ua ? "left" : "top"]),
                  (Ba = ta[ua ? "width" : "height"]),
                  (za = -1 + (Ba - Aa + va) / Ba)),
                1 < za || -1 > za || d(xa, za, ua));
          o("scroll", ta);
        }
      }

      function d(i, a) {
        ha = i.parallaxElements;
        var b = ha.length;
        if (b)
          for (var c = 0; c < b; c++) {
            Ca = ha[c];
            var j = (Da = Ca.element),
              g = a;
            for (Fa in ((Ea =
              Ca.properties ||
              (ua
                ? {
                    translateX: "100%",
                  }
                : {
                    translateY: "100%",
                  })),
            (Ha = ""),
            Ea)) {
              if (((Ga = Ea[Fa]), "number" == typeof Ga)) Ga *= g;
              else if ("string" == typeof Ga)
                for (Ia = Ga.match(la), $ = 0, _ = Ia.length; $ < _; $++)
                  Ga = Ga.replace(Ia[$], parseFloat(Ia[$] * g));
              if (-1 !== e.inArray(Fa, ma)) Ha += Fa + "(" + Ga + ")";
              else {
                var d,
                  m = j.style,
                  k = Fa;
                "opacity" === Fa
                  ? ((d = 0 > g ? 1 + Ga : 1 - Ga),
                    (d = 0 > d ? 0 : 1 < d ? 1 : d))
                  : (d = Ga),
                  (m[k] = d);
              }
            }
            Ha && (j.style[da] = ea + Ha);
          }
      }

      function b(b) {
        return "undefined" == typeof b
          ? -1
          : ("number" != typeof b && "string" != typeof b) ||
            "" === b ||
            isNaN(b)
          ? x.index(b)
          : 0 <= b && b < t.length
          ? b
          : -1;
      }

      function o(c, a) {
        if (qa[c]) {
          for (_ = qa[c].length, $ = h.length = 0; $ < _; $++)
            C.call(h, qa[c][$]);
          for ($ = 0; $ < _; $++) h[$].call(p, c, a);
        }
      }

      function s(d, a) {
        for (var b = 0, e = qa[d].length; b < e; b++)
          if (qa[d][b] === a) return b;
        return -1;
      }
      var p = this,
        f = (i && e(i).eq(0)) || ba,
        u = q.instances,
        w = null;
      if (
        ((i = f[0]),
        e.each(u, function (a) {
          a && a.frame === i && (w = !0);
        }),
        !i || w)
      )
        w
          ? W("Scrollax: Scrollax has been initialized for this frame!")
          : W("Scrollax: Frame is not available!");
      else {
        var P,
          $,
          _,
          pa,
          ra,
          sa,
          ta,
          ua,
          va,
          wa,
          xa,
          ya,
          za,
          Aa,
          Ba,
          ha,
          Ca,
          Da,
          Ea,
          Fa,
          Ga,
          Ha,
          Ia,
          Ja = e.extend({}, q.defaults, j),
          t = [],
          x = null,
          Ka = Ja.parentSelector || "[data-scrollax-parent]",
          ga = Ja.elementsSelector || "[data-scrollax]",
          qa = {},
          h = [],
          V = Y(i);
        (p.frame = i),
          (p.options = Ja),
          (p.parents = t),
          (p.initialized = !1),
          (p.reload = c);
        var fa = function (g, a) {
          var b = e(a),
            c = X(e(a)),
            f = {};
          (f.element = a),
            (f.options = c),
            (f.parallaxElements = []),
            b.find(ga).each(function (d, a) {
              var b = X(e(a));
              (b.element = a), C.call(f.parallaxElements, b);
            }),
            C.call(t, f);
        };
        (p.scroll = l),
          (p.getIndex = b),
          (p.one = function (d, a) {
            function b() {
              a.apply(p, arguments), p.off(d, b);
            }
            return p.on(d, b), p;
          }),
          (p.on = function (e, a) {
            if ("object" == typeof e)
              for (var b in e) aa.call(e, b) && p.on(b, e[b]);
            else if ("function" == typeof a) {
              b = e.split(" ");
              for (var f = 0, h = b.length; f < h; f++)
                (qa[b[f]] = qa[b[f]] || []),
                  -1 === s(b[f], a) && C.call(qa[b[f]], a);
            } else if ("array" == typeof a)
              for (b = 0, f = a.length; b < f; b++) p.on(e, a[b]);
            return p;
          }),
          (p.off = function (e, a) {
            if (a instanceof Array)
              for (var c = 0, f = a.length; c < f; c++) p.off(e, a[c]);
            else
              for (var c = e.split(" "), f = 0, h = c.length; f < h; f++)
                if (((qa[c[f]] = qa[c[f]] || []), "undefined" == typeof a))
                  qa[c[f]].length = 0;
                else {
                  var g = s(c[f], a);
                  -1 !== g && Z.call(qa[c[f]], g, 1);
                }
            return p;
          }),
          (p.set = function (d, a) {
            return (
              e.isPlainObject(d)
                ? e.extend(Ja, d)
                : aa.call(Ja, d) && (Ja[d] = a),
              c(),
              p
            );
          }),
          (p.destroy = function () {
            return (
              N(window, "resize", k),
              N(i, "scroll", l),
              e.each(u, function (a, b) {
                a && a.frame === i && Z.call(q.instances, b, 1);
              }),
              (t.length = 0),
              (p.initialized = !1),
              o("destroy"),
              p
            );
          }),
          (p.init = function () {
            if (!p.initialized)
              return (
                p.on(g),
                c(),
                M(window, "resize", k),
                M(i, "scroll", l),
                C.call(q.instances, p),
                (p.initialized = !0),
                o("initialized"),
                p
              );
          });
      }
    };
  (q.instances = []),
    (function () {
      var h, i, j, m, n, o, r, s;
      L = function (a, b) {
        if (
          ((i = a.ownerDocument || a),
          (j = i.documentElement),
          (m = Y(b) ? b : i.defaultView || window),
          (b = b && b !== i ? b : j),
          (n = (m.pageYOffset || j.scrollTop) - j.clientTop),
          (o = (m.pageXOffset || j.scrollLeft) - j.clientLeft),
          (r = {
            top: 0,
            left: 0,
          }),
          a && a.getBoundingClientRect)
        ) {
          var c = {},
            d = a.getBoundingClientRect();
          for (h in d) c[h] = d[h];
          (r = c), (r.width = r.right - r.left), (r.height = r.bottom - r.top);
        } else return null;
        return b === m
          ? r
          : ((r.top += n),
            (r.left += o),
            (r.right += o),
            (r.bottom += n),
            b === j)
          ? r
          : ((s = L(b)),
            (r.left -= s.left),
            (r.right -= s.left),
            (r.top -= s.top),
            (r.bottom -= s.top),
            r);
      };
    })(),
    (function () {
      function d() {
        this.returnValue = !1;
      }

      function a() {
        this.cancelBubble = !0;
      }
      (M = window.addEventListener
        ? function (b, a, c, e) {
            return b.addEventListener(a, c, e || !1), c;
          }
        : function (f, b, c) {
            var e = b + c;
            return (
              (f[e] =
                f[e] ||
                function () {
                  var e = window.event;
                  (e.target = e.srcElement),
                    (e.preventDefault = d),
                    (e.stopPropagation = a),
                    c.call(f, e);
                }),
              f.attachEvent("on" + b, f[e]),
              c
            );
          }),
        (N = window.removeEventListener
          ? function (b, a, c, e) {
              return b.removeEventListener(a, c, e || !1), c;
            }
          : function (c, a, b) {
              var e = a + b;
              c.detachEvent("on" + a, c[e]);
              try {
                delete c[e];
              } catch (a) {
                c[e] = void 0;
              }
              return b;
            });
    })(),
    (function () {
      function b(c) {
        for (var a, h = 0, i = f.length; h < i; h++)
          if (
            ((a = f[h] ? f[h] + c.charAt(0).toUpperCase() + c.slice(1) : c),
            null != g.style[a])
          )
            return a;
      }
      var f = ["", "webkit", "moz", "ms", "o"],
        g = document.createElement("div");
      (da = b("transform")), (ea = b("perspective") ? "translateZ(0) " : "");
    })(),
    (q.defaults = {
      horizontal: !1,
      offset: 0,
      parentSelector: null,
      elementsSelector: null,
      performanceTrick: !1,
    }),
    (window.Scrollax = q),
    (e.fn.Scrollax = function (f, h) {
      var g, i;
      return (
        e.isPlainObject(f) ||
          (("string" == typeof f || !1 === f) &&
            ((g = !1 === f ? "destroy" : f), (i = slice.call(arguments, 1))),
          (f = {})),
        this.each(function (a, c) {
          var d = e.data(c, "scrollax");
          d || g
            ? d && g && d[g] && d[g].apply(d, i)
            : e.data(c, "scrollax", new q(c, f, h).init());
        })
      );
    }),
    (e.Scrollax = function (b, a) {
      ba.Scrollax(b, a);
    });
  var v = document.head || document.getElementsByTagName("head")[0],
    w = document.createElement("style");
  return (
    (w.type = "text/css"),
    w.styleSheet
      ? (w.styleSheet.cssText =
          ".scrollax-performance, .scrollax-performance *, .scrollax-performance *:before, .scrollax-performance *:after { pointer-events: none !important; -webkit-animation-play-state: paused !important; animation-play-state: paused !important; };")
      : w.appendChild(
          document.createTextNode(
            ".scrollax-performance, .scrollax-performance *, .scrollax-performance *:before, .scrollax-performance *:after { pointer-events: none !important; -webkit-animation-play-state: paused !important; animation-play-state: paused !important; };"
          )
        ),
    v.appendChild(w),
    q
  );
});
